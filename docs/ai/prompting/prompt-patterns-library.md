# 常用提示词模式库

> 这是我在日常开发和学习中积累的 prompt 模式库。不是理论总结，而是"拿来就能用"的模板。每个模式都说明了适用场景和调整要点。

---

## 📋 模式分类

| 类别 | 适用场景 |
|------|----------|
| [代码生成](#代码生成) | 生成、重构、优化代码 |
| [代码审查](#代码审查) | Code Review、安全审计 |
| [文档生成](#文档生成) | 注释、README、API 文档 |
| [分析推理](#分析推理) | 问题分析、决策建议 |
| [内容转换](#内容转换) | 翻译、格式转换、摘要 |
| [结构化提取](#结构化提取) | 从文本提取结构化数据 |

---

## 代码生成

### 模式 1：功能实现

```markdown
## 角色
你是一个资深 {语言/框架} 开发者。

## 任务
实现以下功能：{功能描述}

## 技术要求
- 语言/框架：{具体技术栈}
- 代码风格：{风格要求}
- 必须包含：{类型定义/错误处理/注释等}

## 上下文
```
{相关代码/接口定义}
```

## 输出要求
1. 完整可运行的代码
2. 关键逻辑的注释
3. 使用示例
```

**实例**：

```markdown
## 角色
你是一个资深 React 开发者，熟悉 Hooks 和 TypeScript。

## 任务
实现一个通用的防抖 Hook

## 技术要求
- 使用 TypeScript，完整的类型定义
- 支持泛型，适用于任何值类型
- 支持取消防抖
- 支持 leading/trailing 模式

## 输出要求
1. Hook 完整代码
2. TypeScript 类型定义
3. 3 个使用示例（基础/取消/leading 模式）
```

### 模式 2：代码重构

```markdown
## 任务
重构以下代码，目标：{重构目标}

## 重构约束
- 保持 API 不变
- 必须向后兼容
- 不引入新依赖

## 原代码
```{language}
{原代码}
```

## 输出
1. 重构后的代码
2. 改动点说明
3. 新旧代码对比表
```

### 模式 3：Bug 修复

```markdown
## 问题描述
{bug 表现}

## 复现步骤
1. ...
2. ...
3. ...

## 相关代码
```{language}
{代码}
```

## 期望输出
1. 问题原因分析
2. 修复方案（可能有多个）
3. 推荐方案及理由
4. 修复后的代码
5. 如何验证修复有效
```

---

## 代码审查

### 模式 4：全面 Code Review

```markdown
## 任务
请审查以下代码，从多个维度给出反馈。

## 审查维度
1. **正确性**：逻辑是否正确，边界情况是否处理
2. **可读性**：命名、结构、注释是否清晰
3. **性能**：是否有性能隐患
4. **安全性**：是否有安全漏洞
5. **可维护性**：是否易于修改和扩展

## 代码
```{language}
{代码}
```

## 输出格式
### 总体评价
[1-2 句话总结]

### 问题列表
| 行号 | 问题 | 严重程度 | 建议 |
|------|------|----------|------|

### 亮点（如有）
- ...

### 修改建议优先级
1. [必须改] ...
2. [建议改] ...
3. [可选优化] ...
```

### 模式 5：安全审计

```markdown
## 任务
对以下代码进行安全审计，识别潜在的安全风险。

## 审计重点
- 注入攻击（SQL/XSS/命令注入）
- 认证与授权漏洞
- 敏感信息泄露
- 不安全的依赖使用

## 代码
```{language}
{代码}
```

## 输出格式
### 风险清单
| 风险 | 位置 | 严重程度 | CVE/CWE（如适用） |
|------|------|----------|------------------|

### 详细分析
#### 风险 1：[风险名称]
- 描述：...
- 攻击场景：...
- 修复方案：...
- 修复代码：...
```

---

## 文档生成

### 模式 6：函数注释

```markdown
为以下函数生成 JSDoc 注释：

```javascript
{函数代码}
```

要求：
1. 描述函数用途
2. 说明每个参数的类型和含义
3. 说明返回值
4. 如果有异常，说明可能抛出的错误
5. 提供使用示例
```

### 模式 7：README 生成

```markdown
## 任务
为这个项目生成 README.md

## 项目信息
- 名称：{项目名}
- 描述：{一句话描述}
- 技术栈：{技术栈}
- 主要功能：{功能列表}

## README 结构
1. 项目标题和徽章
2. 简介（1-2 句话）
3. 功能特性（bullet points）
4. 快速开始
   - 环境要求
   - 安装步骤
   - 运行命令
5. 使用示例
6. 配置说明（如有）
7. 贡献指南（简要）
8. License

## 风格
简洁、专业、易于快速浏览
```

### 模式 8：API 文档

```markdown
根据以下接口定义生成 API 文档：

```typescript
{接口/类型定义}
```

文档格式：
### {接口名}

**描述**：[接口用途]

**请求**
- 方法：GET/POST/...
- 路径：/api/...
- Headers：...
- 参数：

| 参数 | 类型 | 必填 | 说明 | 示例 |
|------|------|------|------|------|

**响应**
- 成功响应（200）：
```json
{示例}
```
- 错误响应：
  - 400：参数错误
  - 401：未授权
  - ...

**示例**
```bash
curl -X POST ...
```
```

---

## 分析推理

### 模式 9：问题诊断

```markdown
## 问题
{问题描述}

## 现象
{具体表现}

## 环境
- 系统：...
- 版本：...
- 相关配置：...

## 已尝试
1. {尝试1} → 结果：...
2. {尝试2} → 结果：...

## 请分析
1. 可能的原因（按可能性排序）
2. 每个原因的排查方法
3. 推荐的解决方案
```

### 模式 10：技术决策

```markdown
## 背景
{项目背景和需求}

## 待决策问题
{具体要选择什么}

## 可选方案
A. {方案A}
B. {方案B}
C. {方案C}

## 关注的维度
- 开发效率
- 性能
- 维护成本
- 团队熟悉度
- 社区生态

## 请输出
1. 各方案对比表
2. 推荐方案及理由
3. 推荐方案的风险和缓解措施
```

### 模式 11：Root Cause Analysis

```markdown
## 问题
{线上问题描述}

## 时间线
- HH:MM 用户报告...
- HH:MM 指标异常...
- HH:MM 确认问题...

## 收集到的信息
- 日志：{关键日志}
- 指标：{异常指标}
- 变更：{最近变更}

## 请分析
1. 直接原因（Immediate Cause）
2. 根本原因（Root Cause）
3. 系统性原因（Systemic Cause）
4. 预防措施
5. 类似问题的检测方法
```

---

## 内容转换

### 模式 12：技术文章摘要

```markdown
请将以下技术文章总结为结构化摘要：

---文章开始---
{文章内容}
---文章结束---

输出格式：
## 一句话总结
[核心观点]

## 要点
1. ...
2. ...
3. ...

## 关键概念
- [概念1]：[解释]
- [概念2]：[解释]

## 实践建议
- ...

## 原文链接/来源
[如有]
```

### 模式 13：多语言翻译

```markdown
将以下内容翻译为 {目标语言}：

---原文开始---
{原文}
---原文结束---

翻译要求：
1. 保持技术术语准确（专有名词可保留英文）
2. 保持原文的语气和风格
3. 保持代码块和格式不变
4. 不要翻译代码、变量名、命令

如有多种翻译方式，选择更通顺自然的表达。
```

### 模式 14：格式转换

```markdown
将以下 {源格式} 转换为 {目标格式}：

```{源格式}
{内容}
```

转换要求：
- 保持数据完整，不丢失字段
- 使用 {目标格式} 的标准规范
- 字段命名转换规则：{规则}
```

---

## 结构化提取

### 模式 15：信息抽取

```markdown
从以下文本中提取结构化信息：

---文本开始---
{非结构化文本}
---文本结束---

提取以下字段：
- 名称：
- 日期：
- 金额：
- 类别：
- ...

输出 JSON 格式：
{
  "name": "...",
  "date": "YYYY-MM-DD",
  "amount": number,
  ...
}

如果某字段无法提取，使用 null。
```

### 模式 16：日志解析

```markdown
解析以下日志，提取关键信息：

```
{日志内容}
```

输出格式：
{
  "timestamp": "...",
  "level": "INFO|WARN|ERROR",
  "service": "...",
  "message": "...",
  "error_type": "...",  // 如有
  "stack_trace": "...", // 如有
  "context": {}         // 相关上下文
}

对于批量日志，输出数组。
```

### 模式 17：实体识别

```markdown
识别以下文本中的 {实体类型}：

---文本开始---
{文本}
---文本结束---

实体类型：
- 人名
- 公司名
- 地址
- 日期
- 金额

输出格式：
{
  "entities": [
    { "type": "人名", "value": "...", "position": [start, end] },
    ...
  ]
}
```

---

## 🔧 模式组合技巧

### 组合 1：分析 + 生成

先让模型分析问题，再基于分析生成解决方案：

```markdown
## 第一步：分析
请分析这段代码的问题：
{代码}

## 第二步：生成
基于上述分析，生成修复后的代码。
```

### 组合 2：验证 + 修正

让模型自我验证：

```markdown
请完成以下任务，并验证你的输出：

任务：{任务描述}

完成后：
1. 检查输出是否满足所有要求
2. 列出可能的问题
3. 如果发现问题，提供修正版本
```

### 组合 3：多角度思考

```markdown
请从三个角度分析这个方案：

1. **支持者视角**：这个方案的优点和价值
2. **反对者视角**：这个方案的问题和风险  
3. **中立者视角**：综合评估和建议

方案：{方案描述}
```

---

## 💡 使用建议

1. **先选模式，再填内容**：从模式库选择最接近的，然后调整
2. **根据复杂度调整**：简单任务用简单模式，复杂任务组合模式
3. **积累自己的模式**：遇到好用的 prompt，保存到模式库
4. **版本管理**：有效的 prompt 值得版本化管理

---

## 📚 相关笔记

- [提示词工程基础](prompt-engineering-fundamentals.md)
- [LLM API 使用最佳实践](../llm/llm-api-best-practices.md)
